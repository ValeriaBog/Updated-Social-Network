"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[918],{918:function(e,t,n){n.r(t),n.d(t,{default:function(){return ce}});var o,s,r,a,i=n(5671),l=n(3144),c=n(136),u=n(5716),f=n(1413),d=n(2791),p=n(7781),h=n(364),m=n(9271),v=n(223),x=n(5861),j=n(885),g=n(7757),b=n.n(g),k=n(3018),_=n(3445),P={status:"ProfileStatus_status__AXP6U"},Z=n(184),N=function(e){var t=e.status,n=e.updateStatus,o=(0,d.useState)(!1),s=(0,j.Z)(o,2),r=s[0],a=s[1],i=(0,d.useState)(t),l=(0,j.Z)(i,2),c=l[0],u=l[1];console.log(t);var f=function(){t!==c&&(r?n(c):u(t)),a(!r)};return r?(0,Z.jsx)("div",{className:P.status,children:(0,Z.jsx)("input",{value:c,onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onFocus:function(e){e.target.select()},onBlur:f,className:P.textField})}):(0,Z.jsx)("div",{className:P.status,children:(0,Z.jsx)("span",{onDoubleClick:f,children:null===t?"Good morning, my friends!":t})})},w={row:"ProfileInfo_row__lZlEc",descriptionBlock:"ProfileInfo_descriptionBlock__1rZXD",photoInfo:"ProfileInfo_photoInfo__s6bNc",nameUser:"ProfileInfo_nameUser__5Ga2A",infoUser:"ProfileInfo_infoUser__c05J7",textInfo:"ProfileInfo_textInfo__rbH-9",photoBlock:"ProfileInfo_photoBlock__TeTTK",uploadPhoto:"ProfileInfo_uploadPhoto__9FxMz"},y=["title","titleId"];function I(){return I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},I.apply(this,arguments)}function C(e,t){if(null==e)return{};var n,o,s=function(e,t){if(null==e)return{};var n,o,s={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function F(e,t){var n=e.title,i=e.titleId,l=C(e,y);return d.createElement("svg",I({width:"800px",height:"800px",viewBox:"0 0 1024 1024",className:"icon",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},l),n?d.createElement("title",{id:i},n):null,o||(o=d.createElement("path",{d:"M77.312 286.208h503.808v559.104H77.312z",fill:"#11111"})),s||(s=d.createElement("path",{d:"M133.632 342.016h391.68v335.36H133.632z",fill:"#FFFFFF"})),r||(r=d.createElement("path",{d:"M189.44 621.568h93.184L236.032 537.6zM375.808 453.632l-93.184 167.936h186.88z",fill:"#27aae1"})),a||(a=d.createElement("path",{d:"M637.44 621.568v83.456l337.408-165.376-211.456-432.64-252.928 122.88h110.08l120.32-58.368 127.488 259.584-230.912 113.152z",fill:"#11111"})))}var A=d.forwardRef(F),O=(n.p,"UploadImage_uploadWidget__UNuf-"),S="UploadImage_uploadButton__Y3C8E",U="UploadImage_uploadIcon__+RjvL",M=function(e){var t=e.onChange;return(0,Z.jsxs)("div",{className:O,children:[(0,Z.jsx)("label",{htmlFor:"file-input",className:S,children:(0,Z.jsx)(A,{className:U})}),(0,Z.jsx)("input",{type:"file",id:"file-input",onChange:function(e){e.target.files.length&&t(e.target.files[0])},style:{display:"none"}})]})},E=n(4942),T=function(e){var t=e.profile,n=e.onSubmit,o=(0,d.useState)({fullName:t.fullName,aboutMe:t.aboutMe,lookingForAJob:t.lookingForAJob,lookingForAJobDescription:t.lookingForAJobDescription,contacts:{github:t.contacts.github,vk:t.contacts.vk,facebook:t.contacts.facebook,instagram:t.contacts.instagram,twitter:t.contacts.twitter,website:t.contacts.website,youtube:t.contacts.youtube,mainLink:t.contacts.mainLink}}),s=(0,j.Z)(o,2),r=s[0],a=s[1],i=function(e){var t=e.target,n=t.name,o=t.value;if("checkbox"===t.type){var s=e.target.checked;a((0,f.Z)((0,f.Z)({},r),{},(0,E.Z)({},n,s)))}if(r.contacts.hasOwnProperty(n))return a((0,f.Z)((0,f.Z)({},r),{},{contacts:(0,f.Z)((0,f.Z)({},r.contacts),{},(0,E.Z)({},n,o))}));a((0,f.Z)((0,f.Z)({},r),{},(0,E.Z)({},n,o)))};return(0,Z.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(r)},children:[(0,Z.jsx)("div",{children:(0,Z.jsx)("button",{children:"save"})}),(0,Z.jsxs)("div",{className:w.nameUser,children:["Full name: ",(0,Z.jsx)("input",{value:r.fullName,name:"fullName",onChange:i})]}),(0,Z.jsxs)("div",{className:w.infoUser,children:[(0,Z.jsxs)("div",{className:w.textInfo,children:["About me: ",(0,Z.jsx)("input",{name:"aboutMe",value:r.aboutMe,onChange:i})]}),(0,Z.jsxs)("div",{className:w.textInfo,children:["Looking for a job: ",(0,Z.jsx)("input",{type:"checkbox",name:"lookingForAJob",checked:r.lookingForAJob,onChange:i})]}),(0,Z.jsxs)("div",{className:w.textInfo,children:["My professional skills: ",(0,Z.jsx)("input",{name:"lookingForAJobDescription",value:r.lookingForAJobDescription,onChange:i})]}),(0,Z.jsxs)("div",{className:w.textInfo,children:["Contacts: ",Object.keys(t.contacts).map((function(e){var t=e,n=r.contacts[t],o="";n&&!/^(http|https):\/\/[^ "]+$/.test(n)&&(o="Uncorrected URL");return(0,Z.jsxs)("div",{children:[t,": ",(0,Z.jsx)("input",{name:t,value:r.contacts[t],onChange:i,onBlur:function(e){!function(e,t){"website"===t&&(/^(ftp|http|https):\/\/[^ "]+$/.test(e)||a((0,f.Z)((0,f.Z)({},r),{},{contacts:(0,f.Z)((0,f.Z)({},r.contacts),{},(0,E.Z)({},t,e))})))}(e.target.value,t)}}),o&&(0,Z.jsx)("div",{style:{color:"red"},children:o})]},t)}))]})]})]})},B=function(e){var t=e.contactTitle,n=e.contactValue;return(0,Z.jsxs)("div",{children:[t,": ",n]})},J=function(e){var t=e.profile,n=e.status,o=e.updateStatus,s=e.isOwner,r=e.savePhoto,a=e.saveProfile,i=(0,d.useState)(!1),l=(0,j.Z)(i,2),c=l[0],u=l[1],f=function(){var e=(0,x.Z)(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t);case 2:u(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?(0,Z.jsxs)("div",{className:w.profile,children:[(0,Z.jsx)("img",{src:"https://themified.com/friend-finder/images/covers/1.jpg",alt:"wallpaper"}),(0,Z.jsx)("div",{className:w.row,children:(0,Z.jsx)(N,{status:n,updateStatus:o})}),(0,Z.jsxs)("div",{className:w.descriptionBlock,children:[(0,Z.jsxs)("div",{className:w.photoBlock,children:[(0,Z.jsx)("img",{src:t.photos.small?t.photos.small:k,alt:"Avatar of ".concat(t.fullName),className:w.photoInfo}),(0,Z.jsx)("div",{className:w.uploadPhoto,children:s&&(0,Z.jsx)(M,{onChange:function(e){r(e)}})})]}),c?(0,Z.jsx)(T,{profile:t,onSubmit:f}):(0,Z.jsx)(D,{profile:t,isOwner:s,goToEditMode:function(){u(!0)}})]})]}):(0,Z.jsx)(_.p,{})},D=function(e){var t=e.profile,n=e.isOwner,o=e.goToEditMode;return(0,Z.jsxs)("div",{children:[n&&(0,Z.jsx)("div",{children:(0,Z.jsx)("button",{onClick:o,children:"edit"})}),(0,Z.jsx)("div",{className:w.nameUser,children:t.fullName}),(0,Z.jsxs)("div",{className:w.infoUser,children:[(0,Z.jsxs)("div",{className:w.textInfo,children:["About me: ",t.aboutMe]}),(0,Z.jsxs)("div",{className:w.textInfo,children:["Looking for a job: ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&(0,Z.jsxs)("div",{className:w.textInfo,children:["My professional skills: ",t.lookingForAJobDescription]}),(0,Z.jsxs)("div",{className:w.textInfo,children:["Contacts: ",Object.keys(t.contacts).map((function(e){var n=e;return(0,Z.jsx)(B,{contactTitle:e,contactValue:t.contacts[n]},e)}))]})]})]})},z="Post_item__taeMK",L=function(e){var t=e.message,n=e.likesCount;return(0,Z.jsxs)("div",{className:z,children:[(0,Z.jsx)("img",{src:"https://avatars.githubusercontent.com/u/69945902?s=100",alt:"avatar"}),t,(0,Z.jsxs)("div",{children:[(0,Z.jsx)("span",{children:"like "}),(0,Z.jsx)("span",{children:n})]})]})},H=n(704),R=n(6139),$=n(5210),q=n(2916),Y=(0,$.BS)(300),G=(0,$.Ei)(5),K=(0,H.Z)({form:"ProfileAddPostForm"})((function(e){var t=e.handleSubmit,n=e.invalid;return(0,Z.jsxs)("form",{onSubmit:t,children:[(0,Z.jsx)(R.Z,{component:q.g,validate:[$.lp,G,Y],name:"newPostText",placeholder:"Post message"}),(0,Z.jsx)("div",{children:(0,Z.jsx)("button",{disabled:n,children:"Add post"})})]})})),V="Posts_postsBlock__m036r",X="Posts_posts__UMYqF",W=(0,d.memo)((function(e){var t=e.posts,n=e.addPost,o=t.map((function(e){return(0,Z.jsx)(L,{message:e.message,likesCount:e.likesCount},e.id)}));return(0,Z.jsxs)("div",{className:V,children:[(0,Z.jsx)("h3",{children:"My posts"}),(0,Z.jsx)(K,{onSubmit:function(e){n(e.newPostText)}}),(0,Z.jsx)("div",{className:X,children:o})]})})),Q={addPost:v.ef.addPost},ee=(0,p.qC)((0,h.$j)((function(e){return{posts:e.profilePage.posts}}),Q))(W),te=n(3741),ne=n(9021),oe=(0,d.forwardRef)((function(e,t){return(0,Z.jsx)(te.Z,(0,f.Z)({elevation:6,ref:t,variant:"filled"},e))})),se=function(e){var t=e.error,n=e.closeError,o=function(e,t){"clickaway"!==t&&n("")};return(0,Z.jsx)(ne.Z,{open:""!==t,autoHideDuration:6e3,onClose:o,children:(0,Z.jsx)(oe,{onClose:o,severity:"error",sx:{width:"100%"},children:t})})},re=function(e){var t=e.profile,n=e.status,o=e.updateStatus,s=e.isOwner,r=e.savePhoto,a=e.saveProfile,i=e.error,l=e.setAppErrorAC;return(0,Z.jsxs)("div",{children:[(0,Z.jsx)(se,{error:i,closeError:function(e){l(e)}}),(0,Z.jsx)(J,{profile:t,status:n,updateStatus:o,isOwner:s,savePhoto:r,saveProfile:a}),(0,Z.jsx)(ee,{})]})},ae=n(1912),ie=(0,f.Z)((0,f.Z)((0,f.Z)({},v.ef),v.YA),ae.xZ),le=(0,p.qC)((0,h.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.id,isAuth:e.auth.isAuth,error:e.app.error}}),ie),m.EN)(function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"refleshProfile",value:function(){var e=this.props,t=e.getUserProfile,n=e.match,o=e.getStatus,s=e.authorizedUserId,r=e.history,a=Number(n.params.userId);!a&&s?a=s:a||s||r.push("/login"),t(a),o(a)}},{key:"componentDidMount",value:function(){this.refleshProfile()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.match.params.userId!==e.match.params.userId&&this.refleshProfile()}},{key:"render",value:function(){return(0,Z.jsx)(re,(0,f.Z)((0,f.Z)({},this.props),{},{isOwner:!this.props.match.params.userId}))}}]),n}(d.Component)),ce=le},2916:function(e,t,n){n.d(t,{g:function(){return c}});var o=n(1413),s=n(5987),r="Textarea_formControl__8prTr",a="Textarea_error__ntugN",i=n(184),l=["input","meta"],c=function(e){var t=e.input,n=e.meta,c=(0,s.Z)(e,l),u=!n.pristine&&n.error,f=r+(u?" "+a:"");return(0,i.jsxs)("div",{className:f,children:[(0,i.jsx)("textarea",(0,o.Z)((0,o.Z)({},t),c)),u&&(0,i.jsx)("span",{children:n.error})]})}}}]);
//# sourceMappingURL=918.a7699d05.chunk.js.map